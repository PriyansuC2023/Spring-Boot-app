<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Edit Book</title>
    <meta charset="UTF-8">
</head>

<body>

<h2>Edit Book</h2>

<form th:action="@{/books/update/{id}(id=${book.id})}"
      method="post"
      enctype="multipart/form-data">

    <!-- CSRF -->
    <input type="hidden"
           th:name="${_csrf.parameterName}"
           th:value="${_csrf.token}" />

    <!-- TITLE -->
    <label>Title:</label><br>
    <input type="text"
           name="title"
           th:value="${book.title}"
           required><br><br>

    <!-- AUTHOR -->
    <label>Author:</label><br>
    <input type="text"
           name="author"
           th:value="${book.author}"
           required><br><br>

    <!-- DESCRIPTION -->
    <label>Description:</label><br>
    <textarea name="description"
              rows="4"
              cols="40"
              th:text="${book.description}"></textarea><br><br>

    <!-- EXISTING FILE -->
    <p>
        Current PDF:
        <a th:href="@{/books/file/{id}(id=${book.id})}" target="_blank">
            <span th:text="${book.fileName}"></span>
        </a>
    </p>

    <!-- OPTIONAL FILE UPLOAD -->
    <label>Replace PDF (optional):</label><br>
    <input type="file" name="file" accept="application/pdf"><br><br>

    <!-- SUBMIT -->
    <button type="submit">Update Book</button>
    <a th:href="@{/books}">Cancel</a>

</form>

</body>
</html>